<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[lua_script-青云志]]></title>
    <url>%2F2018%2F09%2F30%2Fgame-QYZ-lua-script%2F</url>
    <content type="text"><![CDATA[1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000100110021003100410051006100710081009101010111012101310141015101610171018101910201021102210231024102510261027102810291030103110321033103410351036103710381039104010411042104310441045104610471048104910501051105210531054105510561057105810591060106110621063106410651066106710681069107010711072107310741075107610771078107910801081108210831084108510861087108810891090109110921093109410951096109710981099110011011102110311041105110611071108110911101111111211131114111511161117111811191120112111221123112411251126112711281129113011311132113311341135113611371138113911401141114211431144114511461147114811491150115111521153115411551156115711581159116011611162116311641165116611671168116911701171117211731174117511761177117811791180118111821183118411851186118711881189119011911192119311941195119611971198119912001201120212031204120512061207120812091210121112121213121412151216121712181219122012211222122312241225122612271228122912301231123212331234123512361237123812391240124112421243124412451246124712481249125012511252125312541255125612571258125912601261126212631264126512661267126812691270127112721273127412751276127712781279128012811282128312841285128612871288128912901291129212931294129512961297129812991300130113021303130413051306130713081309131013111312131313141315131613171318131913201321132213231324132513261327132813291330133113321333133413351336133713381339134013411342134313441345134613471348134913501351135213531354135513561357135813591360136113621363136413651366136713681369137013711372137313741375137613771378137913801381138213831384138513861387138813891390139113921393139413951396139713981399140014011402140314041405140614071408140914101411141214131414141514161417141814191420142114221423142414251426142714281429143014311432143314341435143614371438143914401441144214431444144514461447144814491450145114521453145414551456145714581459146014611462146314641465146614671468146914701471147214731474147514761477147814791480148114821483148414851486148714881489149014911492149314941495149614971498149915001501150215031504150515061507150815091510151115121513151415151516151715181519152015211522152315241525152615271528152915301531153215331534153515361537153815391540154115421543154415451546154715481549155015511552155315541555155615571558init(0)require "TSLib"local sz = require("sz")local json = sz.json_G.const = &#123; cur_scriptDir = userPath().."/lua/", --当前目录 cur_resDir = userPath().."/res/", w = "", h = "", package_name = "com.yinhu.sdk.wx.pj", account_list = &#123;&#125;, sd_path = getSDCardPath().."/Pictures/", record_file_path = userPath().."/lua/Record.txt", record_id = 1,&#125;local w,h = getScreenSize()local UIRet, UISet, UISave = 0, &#123;&#125;, _G.const.package_name .. "_Set.dat"main_list = &#123; &#123; Name='账号登陆', Color=&#123;&#123;481,332,0xd70c19&#125;,&#123;480,302,0xd70c19&#125;,&#123;483,264,0xffffff&#125;,&#123;483,204,0xffffff&#125;,&#123;474,355,0xf7f8f8&#125;,&#125;, Run = (function() if _G.func_list[10].is_check then click.pos&#123;479,158&#125; else click.pos&#123;510,202&#125; sys.msleep(1500) for var = 1,20 do --sys.input_text("\b") --删除输入框中的文字（假设输入框中已存在文字） os.execute("input keyevent 67") end sys.msleep(1500) sys.input_text(_G.var.user) sys.msleep(1500) click.pos&#123;544,257&#125; --[[ sys.msleep(1500) for var = 1,15 do os.execute("input keyevent 67") --删除输入框中的文字（假设输入框中已存在文字） end ]] sys.msleep(1500) toast(_G.var.pwd) sys.input_text2(_G.var.pwd) sys.msleep(1500) click.pos&#123;481,314&#125; end end), &#125;, &#123; Name='注册账号', Color=&#123;&#123;586,403,0xffffff&#125;,&#123;573,405,0xffffff&#125;,&#123;573,382,0xd70c19&#125;,&#123;573,426,0xd70c19&#125;,&#123;391,382,0xa7a7a7&#125;,&#125;, Run = (function() local rnd_str = function(_len) _len = _len or 8 local chars = 'abcdefghijklmnopqrstuvwxyz0123456789' local str = "" local rnd for i=1,_len do rnd = math.random(1, string.len(chars)) str = str..string.sub(chars,rnd,rnd) end return str; end if _G.func_list[10].is_check then if not _G.var.is_reg then _G.var.reg_pwd = "" _G.var.reg_user = "" local r = httpGet("http://119.23.241.170/api/game.html?action=rnd_str") local obj = json.decode(r) _G.var.reg_user = obj.username _G.var.reg_pwd = rnd_str(math.random(6, 7)) click.pos&#123;527,203&#125; sys.msleep(800) for var = 1,20 do os.execute("input keyevent 67") end sys.msleep(800) sys.input_text(_G.var.reg_user) sys.msleep(800) click.pos&#123;544,257&#125; sys.msleep(800) for var = 1,20 do os.execute("input keyevent 67") end toast(pwd) sys.input_text(_G.var.reg_pwd) sys.msleep(800) click.pos&#123;544,305&#125; sys.msleep(800) for var = 1,20 do os.execute("input keyevent 67") end sys.msleep(800) sys.input_text(_G.var.reg_pwd) sys.msleep(800) click.pos&#123;600,399&#125; _G.var.is_reg = true end else click.pos&#123;324,153&#125; end sys.msleep(1500) end), &#125;, &#123; Name='知道了', Find_Color=&#123; &#123;0xfafdfd,"6|4|0xffffff,6|-20|0x86dbb9,6|-19|0x60c5b3,6|-18|0x45b09f,32|-267|0x883401,-20|-270|0x893401,-7|28|0x6b3822"&#125;, &#125;, Range = &#123;239,116,609,432&#125;, Offset = &#123;0,0&#125;, &#125;, &#123; Name='登录游戏', Color=&#123;&#123;389,431,0xcf690e&#125;,&#123;560,427,0xdc8237&#125;,&#123;504,427,0xfdf5c4&#125;,&#123;529,431,0xfff1b5&#125;,&#123;421,426,0xfdf5c4&#125;,&#125;, Run = (function() if _G.func_list[10].is_check then if _G.var.is_reg then sys.log("账号注册成功") _G.var.is_close_app = true local user_dir = _G.const.sd_path.."/user.txt" local data = _G.var.reg_user.."--".._G.var.reg_pwd file.save(user_dir,data,"a") return true end else if not _G.var.is_sltSer then sys.log("选择服务器") click.pos&#123;575,341&#125; --选择服务器 else click.pos&#123;477,434&#125; --登录游戏 end end sys.msleep(1500) end), &#125;, &#123; Name='开始游戏', Color= &#123;&#123;801,481,0xffffff&#125;,&#123;821,488,0xfffdfb&#125;,&#123;858,479,0xfffefd&#125;,&#123;858,459,0xfbc39e&#125;,&#123;858,464,0xe58238&#125;,&#123;858,465,0xde7b31&#125;,&#125;, Run = (function() click.pos&#123;834,486&#125; end), &#125;, &#123; Name='创建角色', Color=&#123;&#123;844,456,0xfbc39e&#125;,&#123;844,457,0xeaa673&#125;,&#123;843,477,0xfefbf7&#125;,&#123;853,477,0xffffff&#125;,&#123;855,460,0xe88d53&#125;,&#123;15,82,0x060e1f&#125;,&#125;, Run = (function() click.pos&#123;923,389&#125; click.pos&#123;829,481&#125; end), &#125;, &#123; Name='挂机结算', Color=&#123;&#123;464,131,0x883401&#125;,&#123;483,131,0x883300&#125;,&#123;405,341,0x8be0be&#125;,&#123;405,342,0x6bcbb3&#125;,&#123;395,362,0xffffff&#125;,&#123;537,340,0xa6a695&#125;,&#123;537,341,0x8be0be&#125;,&#123;550,357,0xfbfdfd&#125;,&#125;, Run = (function() click.pos&#123;543,359&#125; end), &#125;, &#123; Name='前往整理', Color=&#123;&#123;568,314,0x9eb9a3&#125;,&#123;568,315,0x86dbb9&#125;,&#123;568,316,0x60c5b3&#125;,&#123;568,317,0x45b09f&#125;,&#123;564,335,0xfdfefe&#125;,&#123;383,314,0xd2c2a3&#125;,&#123;383,315,0xfcecdb&#125;,&#123;383,316,0xf8e2c3&#125;,&#123;404,335,0x893401&#125;,&#125;, Run = (function() click.pos&#123;574,337&#125; _G.var.is_get_mail = true end), &#125;, &#123; Name='领取奖励', Color=&#123; &#123;&#123;122,85,0x792604&#125;,&#123;122,91,0x7b2907&#125;,&#123;149,80,0x772200&#125;,&#123;156,87,0x782301&#125;,&#123;166,86,0x7c2a08&#125;,&#123;122,257,0x80310f&#125;,&#123;135,252,0x782402&#125;,&#123;133,238,0xd2ba8e&#125;,&#123;133,239,0xeee3cb&#125;,&#125;, &#125;, Run = (function() if color.multi_color(&#123; &#123;&#123;105,448,0x89debc&#125;,&#123;105,449,0x66c8b3&#125;,&#123;105,450,0x4ab1a0&#125;,&#123;132,464,0xfdfefe&#125;,&#123;136,464,0xf8fcfc&#125;,&#125;, &#123;&#123;132,464,0xfdfefe&#125;,&#123;136,464,0xf8fcfc&#125;,&#123;102,447,0xa2ae9b&#125;,&#123;102,448,0x89debc&#125;,&#125;, &#123;&#123;115,447,0xa2ae9b&#125;,&#123;115,448,0x89debc&#125;,&#123;115,449,0x66c8b3&#125;,&#123;115,450,0x4ab1a0&#125;,&#125;, &#125;) then click.pos&#123;147,467&#125; else click.pos&#123;264,31&#125; end end), &#125;, &#123; Name='守护过期', Color=&#123; &#123;&#123;523,188,0x5b204f&#125;,&#123;521,350,0xcda786&#125;,&#123;521,351,0xf4c37f&#125;,&#123;521,352,0xeda562&#125;,&#123;385,234,0xf3cf35&#125;,&#123;622,274,0xb92020&#125;,&#125;, &#123;&#123;552,317,0x883300&#125;,&#123;580,315,0x883300&#125;,&#123;616,315,0x883300&#125;,&#123;515,350,0xcda786&#125;,&#123;515,351,0xf4c37f&#125;,&#123;515,352,0xeda562&#125;,&#123;521,392,0xd17c27&#125;,&#123;521,393,0x7c4b27&#125;,&#125;, &#125;, Run = (function() click.pos&#123;807,140&#125; end), &#125;, &#123; Name='商城-关闭', Color=&#123; &#123;&#123;462,49,0xce8b35&#125;,&#123;462,50,0xf1aa57&#125;,&#123;462,54,0x792f06&#125;,&#123;513,517,0x341200&#125;,&#123;513,518,0x6e3b19&#125;,&#123;472,21,0xf7f1eb&#125;,&#123;499,26,0xfefefa&#125;,&#125; &#125;, Run = (function() click.pos&#123;859,35&#125; end), &#125;, &#123; Name='续费取消', Color=&#123;&#123;473,359,0xffffff&#125;,&#123;473,343,0x81d6b4&#125;,&#123;473,346,0x2ca392&#125;,&#123;458,151,0x883300&#125;,&#123;475,151,0x8e3d0a&#125;,&#125;, Run = (function() click.pos&#123;668,150&#125; end), &#125;, &#123; Name='一键出售', Color=&#123; &#123;&#123;464,78,0x883401&#125;,&#123;474,73,0x883300&#125;,&#123;489,76,0x883300&#125;,&#123;508,78,0x8d3b08&#125;,&#123;513,81,0x883300&#125;,&#123;196,433,0x231201&#125;,&#123;318,424,0xe5d4a3&#125;,&#123;318,426,0x9d8c64&#125;,&#125;, &#123;&#123;693,417,0x86dbb9&#125;,&#123;693,418,0x60c5b3&#125;,&#123;710,435,0xffffff&#125;,&#123;558,435,0x883300&#125;,&#123;558,443,0x883300&#125;,&#123;524,431,0x8d3b08&#125;,&#123;489,76,0x883300&#125;,&#123;508,71,0x883401&#125;,&#125;, &#125;, Run = (function() click.pos&#123;699,438&#125; end), &#125;, &#123; Name='确定', Color= &#123;&#123;471,474,0x8ee3c1&#125;,&#123;474,494,0xffffff&#125;,&#123;488,492,0xeff8f7&#125;,&#123;488,478,0x27a291&#125;,&#125;, Run = (function() click.pos&#123;476,492&#125; end), &#125;, &#123; Name='确定2', Color=&#123; &#123;&#123;474,400,0x883300&#125;,&#123;488,402,0x893401&#125;,&#123;481,381,0xf8e7d6&#125;,&#123;481,382,0xf8dfb6&#125;,&#123;488,459,0xffffff&#125;,&#123;517,461,0xffffff&#125;,&#125;, &#123;&#123;476,392,0xfbead9&#125;,&#123;476,393,0xf8e1be&#125;,&#123;474,411,0x8a3603&#125;,&#123;474,415,0x883300&#125;,&#123;488,413,0x893502&#125;,&#123;472,430,0xf6e6bd&#125;,&#123;425,408,0xc4b380&#125;,&#125;, &#125;, Run = (function() click.pos&#123;478,413&#125; end), &#125;, &#123; Name='跳过', Color=&#123;&#123;877,471,0x7cd3b3&#125;,&#123;877,472,0x56bcab&#125;,&#123;877,473,0x38ab9a&#125;,&#123;876,491,0xffffff&#125;,&#123;881,497,0xf8fdfc&#125;,&#123;895,497,0xf7fcfb&#125;,&#125;, Run = (function() click.pos&#123;884,490&#125; end), &#125;, &#123; Name='结算-确定', Color= &#123; &#123;&#123;459,314,0xd138fe&#125;,&#123;526,266,0xdb64e3&#125;,&#123;437,338,0xfefefe&#125;,&#123;354,335,0xffffff&#125;,&#123;587,335,0xffffff&#125;,&#125;, &#123;&#123;570,369,0x91e2c1&#125;,&#123;570,370,0x7bd2b3&#125;,&#123;570,371,0x58bead&#125;,&#123;393,369,0xfceddb&#125;,&#123;393,370,0xf7e5d0&#125;,&#123;393,371,0xf5dcb3&#125;,&#123;578,387,0xfdfefe&#125;,&#125;, &#125;, Run = (function() if color.multi_color(&#123;&#123;477,369,0x91e2c1&#125;,&#123;477,370,0x7bd2b3&#125;,&#123;477,371,0x58bead&#125;,&#123;477,372,0x3dac9b&#125;,&#125;) then click.pos&#123;480,389&#125; else click.pos&#123;569,388&#125; end end), &#125;, &#123; Name='跳过指引', Color= &#123;&#123;888,14,0x381639&#125;,&#123;878,13,0x371537&#125;,&#123;935,17,0xbe67d9&#125;,&#123;935,18,0xbf65d0&#125;,&#123;943,18,0x502f61&#125;,&#125;, Run = (function() click.pos&#123;934,17&#125; end), &#125;, &#123; Name='符文寻宝', Color=&#123;&#123;786,458,0x8be0be&#125;,&#123;786,459,0x6bcbb3&#125;,&#123;786,460,0x4eb4a2&#125;,&#123;184,48,0xeac966&#125;,&#123;184,49,0xeeb449&#125;,&#123;184,50,0xf29734&#125;,&#123;184,51,0xe98024&#125;,&#125;, Run = (function() if color.multi_color(&#123;&#123;560,402,0xdd1801&#125;,&#123;560,407,0xdd1100&#125;,&#123;560,408,0xdd1200&#125;,&#123;561,409,0xde1b02&#125;,&#123;562,409,0xde2204&#125;,&#125;) then click.pos&#123;896,63&#125; else click.pos&#123;581,395&#125; end end), &#125;, &#123; Name='装备寻宝', Color=&#123;&#123;477,384,0x86dbb9&#125;,&#123;477,385,0x60c5b3&#125;,&#123;477,386,0x45b09f&#125;,&#123;280,56,0xfffefd&#125;,&#123;280,59,0xfef8f3&#125;,&#123;280,50,0xf29734&#125;,&#123;280,51,0xe98024&#125;,&#123;667,105,0x8c3904&#125;,&#123;663,105,0x8d3905&#125;,&#125;, Run = (function() if color.multi_color(&#123;&#123;206,57,0xffffff&#125;,&#123;206,45,0xc25c3a&#125;,&#123;206,46,0xdb8346&#125;,&#123;206,47,0xd47d3d&#125;,&#123;217,67,0xfdf8f5&#125;,&#125;) then --有没有符文栏 click.pos&#123;192,58&#125; else click.pos&#123;896,63&#125; end end), &#125;, &#123; Name='提示-取消', Color= &#123;&#123;568,315,0x86dbb9&#125;,&#123;568,316,0x60c5b3&#125;,&#123;568,317,0x45b09f&#125;,&#123;389,315,0xfcecdb&#125;,&#123;479,277,0x893401&#125;,&#123;489,137,0x8c3906&#125;,&#123;472,137,0x8e3c09&#125;,&#125;, Run = (function() click.pos&#123;387,332&#125; end), &#125;, &#123; Name='选择服务器', Color=&#123;&#123;154,34,0xf7f1df&#125;,&#123;190,30,0xfffdf8&#125;,&#123;253,38,0xffffff&#125;,&#123;715,449,0xdbb9a9&#125;,&#123;715,450,0xfcb885&#125;,&#123;687,472,0xfffdfb&#125;,&#123;703,457,0xd87226&#125;,&#123;645,43,0xfefefe&#125;,&#123;607,49,0x3da88f&#125;,&#125;, Run = (function() if not _G.var.is_sltSer then local _tab = &#123;&#123;209,404&#125;,&#123;211,353&#125;,&#123;206,301&#125;,&#123;206,247&#125;,&#123;211,195&#125;&#125; local serv_number = 0 local x,y local whitelist = "0123456789" if _G.var.server &gt;= 1 and _G.var.server &lt;= 50 then serv_number = 1 elseif _G.var.server &gt;= 51 and _G.var.server &lt;= 100 then serv_number = 2 elseif _G.var.server &gt;= 101 and _G.var.server &lt;= 150 then serv_number = 3 elseif _G.var.server &gt;= 151 and _G.var.server &lt;= 200 then serv_number = 4 elseif _G.var.server &gt;= 201 and _G.var.server &lt;= 250 then serv_number = 5 end for i=1,2 do click.pos&#123;_tab[serv_number][1],_tab[serv_number][2]&#125; end local _tab2 = &#123;0xd6cdbe,"235|0|0xd6c9b5,235|50|0xd2ba9a,0|50|0xd3bb97,0|63|0xd6cebe,234|63|0xd5bda9"&#125; local ocr_tab = &#123; "01c00f00e406107043818fffc010004@00$4$39$14$9", "600f003c00ffff000c003000@11$1$32$14$7", "03807fc731f083c606181830e0fe$6$47$14$8", "0071e7eff8e1c382061c3fd8de3e$8$58$14$8", "6005003c00fffffffc003000@11$1$42$14$7", "0ff0ffe620f181860618383f@10$6$46$14$7", "000bf83860e183860e0c683f@00$5$37$14$7", "8003000c00700fc0f31e0fe03c00800@00$7$36$14$9", "03c07ff1c032003c007800dc071ffc$0$48$15$8", "401f00f806e033818f1c37c0@11$2$39$14$7", "6005003c00fffffffc003000c003$1$44$14$8", "000f0038206081870ffe379f@10$3$39$14$7", "03e03ff0e6331834203860d0e320fe$6$51$15$8", "8002000801e01e83e23c0f80@00$7$27$14$7", "3f04ff0d061e043c084c319ffe0ff0$9$57$15$8", "1801f83c30e061818e042c339ffc0f8@00$9$51$14$9", "30fbf7ecf0e1c387071c3fdf9c3e$8$65$14$8", "0004820f041e183c386ff18f3f@0$3$43$15$7", "0ff07ff98036003c007c00df9f0ff8$0$57$15$8", "0030f9f9fe361c3c307870dff33e7e$8$65$15$8", "1c00fe1b8e160c38185831b8c63ff80f8@000$9$58$15$9", "03e07ff1c433103c6078c0f0c320fc$6$52$15$8", "0005007c03f01f80c7061e705f81$2$41$14$8", "0030f1f1f63638283078e0bb633e7c$8$56$15$8", "0071f3fef8f1c183071c1fd8de3e$8$59$14$8", "3e04fe0b061c0c2818d8239ffe1ff0$9$56$15$8", "000ff83c606181860e0c781f@10$5$38$14$7", "38f8f9fb1e3418383078f19f7f1c7c$8$65$15$8", "3e04fe0b061c0c2818d8239ffe1ff0$9$56$15$8", "0ff07ff9c43b103c207860f0ff20fc$6$60$15$8", "fe0ff81c207081c30f0f781f@10$5$47$14$7", "6006c00d801ffff0006000c001@1$1$33$15$7", "006003c01c806103020c0c3fff8030002@000$4$38$15$9", "006003c00d807101820e043fffbffe002@000$4$50$15$9", "000ec03f00fe033c0c7830dfc1@1$2$43$15$7", "1ff8fcf9801e003c006c019fff@0$0$50$15$7", "006003c01c806103820c0c3fff8030002@000$4$39$15$9", &#125; local area_tab = &#123; "fffffffe000c00d983318c6318c3e183830f063b0cc31b0330036000@1$区$97$15$15", "ffff800e000c80d983318c61b0c1c183830f86338cc39b03b0026000@1$区$87$15$15", "7ffeffffc003c00bd81bcc33c663c7c3c383c3c3c6e3cc63f83bc01bc003$区$124$16$15", "ffffc003c00bd01bd813cc33c663c3c3c383c7c3ce63d833d01bc00bc003$区$112$16$15", &#125; local index = addTSOcrDictEx(ocr_tab) --加载文字点阵字库463523,252524 local index2 = addTSOcrDictEx(area_tab) --加载文字点阵字库463523,252524 local sx0,sy0,sx,sy = 416,80,437,158 local is_find = false --if _G.var.server &lt; 100 then sx0 = sx0 - 9; sx = sx - 9; end local count = 1 while true do repeat --sys.log("sy0:"..sy0..",sy:"..sy) x, y = tsFindText(index2,"区",sx0,sy0,sx,sy,"463523,252524",85) --sys.log(x..":"..y) --local a = ocrText(point[var].x+3, point[var].y-14, point[var].x+96, point[var].y+30, 10, whitelist) local ret = tsOcrText(index, x-33, y-3, x-1, y+17, "463523,252524", 85) if tonumber(ret) == _G.var.server then click.pos&#123;x,y&#125;;click.pos&#123;x,y&#125;;is_find = true end --if ret == "100" then sx0 = sx0 - 9; sx = sx - 9; dx = dx - 10 end sys.log(ret) if y ~= -1 then sy0 = y + 58 sy = sy0 + 22 if sy &gt; 414 then if sx0 ~= 679 then sy0,sy = 80,158 sx0,sx = 679,700 if _G.var.server &lt; 100 then sx0 = sx0 - 9; sx = sx - 9; end else sx0,sy0,sx,sy = 416,80,437,158 count = count + 1 click.drag(560,340,560,200) sys.msleep(3500) if count &gt;= 7 then is_find = true end end end else if sx0 ~= 679 then sy0,sy = 80,158 sx0,sx = 679,700 else is_find = true end end until true if is_find then break end end click.pos&#123;713,469&#125; else click.pos&#123;814,41&#125; -- 关闭 end end), &#125;, &#123; Name='日常', Color=&#123; &#123;&#123;755,512,0x221100&#125;,&#123;792,513,0x221100&#125;,&#123;799,507,0x231201&#125;,&#123;806,505,0x221100&#125;,&#123;572,100,0x2b1a08&#125;,&#123;832,93,0xffff11&#125;,&#123;836,98,0x7e421d&#125;,&#125;, &#123;&#123;507,65,0x9d3715&#125;,&#123;511,60,0xfcbe5b&#125;,&#123;572,88,0x221100&#125;,&#123;535,87,0x221100&#125;,&#123;592,92,0x221100&#125;,&#123;602,93,0x2a1907&#125;,&#125;, &#125;, Run = (function() local is_find = false for k,v in ipairs(_G.func_list) do repeat if not v.find_color then break end if v.is_finish then break end if not v.is_check then sys.log(v.name.."功能没开启") break end sys.log("find_task:"..v.name) local x,y = color.ts_find_color(v.find_color,80,&#123;114,122,854,430&#125;) if x ~= -1 then local x2,y2 = color.ts_find_color(&#123;0xffffff,"5|0|0xffffff,12|0|0xf2f9f8,12|-20|0x83d8b6,31|0|0xffffff"&#125;,80,&#123;x+171,y+1,x+273,y+49&#125;) if x2 ~= -1 then click.pos&#123;x2,y2&#125; _G.var.step = "fub" is_find = true else v.is_finish = true end end until true if is_find then break end end if not is_find then sys.log("没有任务了") for var = 1,2 do click.pos&#123;358,466&#125; sys.msleep(500) click.pos&#123;464,469&#125; sys.msleep(500) click.pos&#123;571,468&#125; sys.msleep(500) end _G.var.is_ric_sucess = true _G.var.is_up = false _G.var.step = "" click.pos&#123;879,67&#125; end sys.msleep(1500) end), &#125;, &#123; Name='黑屏', Color= &#123; &#123;&#123;877,8,0x018001&#125;,&#123;877,9,0x018001&#125;,&#123;877,10,0x018001&#125;,&#123;898,8,0x018001&#125;,&#123;898,9,0x018001&#125;,&#123;898,10,0x018001&#125;,&#123;898,11,0x018001&#125;,&#125;, &#123;&#123;877,8,0x018001&#125;,&#123;877,14,0x027f02&#125;,&#123;69,64,0x591908&#125;,&#123;71,53,0x793e1c&#125;,&#123;71,54,0x6e3210&#125;,&#125;, &#123;&#123;877,8,0x014001&#125;,&#123;877,14,0x014001&#125;,&#123;897,14,0x014001&#125;,&#123;897,8,0x014001&#125;,&#123;887,8,0x014001&#125;,&#125;, &#125;, Run = (function() if color.multi_color(&#123;&#123;927,103,0xe5a340&#125;,&#123;919,98,0xe6d5c5&#125;,&#123;925,173,0xb03ee1&#125;,&#125;) then sys.log("引导点击副本") click.pos&#123;927,102&#125; --引导点击副本 elseif color.multi_color(&#123; &#123;&#123;230,232,0x231201&#125;,&#123;230,236,0x241302&#125;,&#123;230,240,0x241301&#125;,&#123;233,208,0xbeb794&#125;,&#123;233,210,0xfdedca&#125;,&#123;310,291,0xcb9e6a&#125;,&#123;155,457,0xe9c896&#125;,&#123;156,457,0xd6bf8e&#125;,&#125;, &#123;&#123;230,232,0x231201&#125;,&#123;230,236,0x241302&#125;,&#123;230,240,0x241301&#125;,&#123;489,74,0x883300&#125;,&#123;469,77,0x893401&#125;,&#123;495,74,0x893502&#125;,&#123;310,284,0xcb9e6a&#125;,&#125;, &#125;) then sys.log("设置") if not _G.var.is_setting then if color.multi_color(&#123;&#123;205,174,0xffffff&#125;,&#123;216,175,0xfcfefd&#125;,&#123;221,175,0xfdfefe&#125;,&#123;222,159,0x32a9a9&#125;,&#123;222,160,0x239e96&#125;,&#123;222,203,0x31fddb&#125;,&#125;) then sys.log("挂机设置") local _tab_cls = &#123;0x8c7b69,"0|3|0x887766,-5|3|0x8c7b68,4|3|0x8c7b68,4|15|0xc3aa70,6|-11|0xebe9c5"&#125; local x,y for i=1,2 do x,y = color.ts_find_color(_tab_cls,80,&#123;702,302,786,401&#125;) if x ~= -1 then click.pos&#123;x,y&#125; sys.msleep(1500) end click.drag(614,369,614,272) sys.msleep(500) end _G.var.is_setting = true else click.pos&#123;232,182&#125; end else click.pos&#123;785,78&#125; --关闭 end elseif color.multi_color(&#123;&#123;703,356,0xf1c58b&#125;,&#123;703,357,0xeeb975&#125;,&#123;703,358,0xeda361&#125;,&#123;703,359,0xe89856&#125;,&#123;703,397,0xe9aa52&#125;,&#123;703,398,0xb5600b&#125;,&#125;) then sys.log("立即体验") click.pos&#123;703,377&#125; --立即体验 elseif color.multi_color(&#123;&#123;775,467,0x83d8b6&#125;,&#123;775,468,0x5cc2b1&#125;,&#123;775,469,0x41ae9d&#125;,&#125;) then sys.log("任务列表") click.pos&#123;775,483&#125; --前往 elseif color.multi_color(&#123;&#123;471,77,0x883300&#125;,&#123;488,74,0x883300&#125;,&#123;311,455,0x883300&#125;,&#123;259,107,0x948e6f&#125;,&#123;576,434,0x57422e&#125;,&#123;717,391,0x79cebd&#125;,&#123;717,392,0x3eb09f&#125;,&#125;) then sys.log("护送美女") click.pos&#123;247,402&#125; --前往 elseif color.multi_color(&#123;&#123;561,315,0x86dbb9&#125;,&#123;561,316,0x60c5b3&#125;,&#123;561,317,0x45b09f&#125;,&#123;472,137,0x8e3c09&#125;,&#123;489,135,0x893502&#125;,&#123;396,314,0xd2c2a3&#125;,&#123;396,315,0xfcecdb&#125;,&#123;396,316,0xf8e2c3&#125;,&#125;) then sys.log("背包已满") _G.var.step = "clear_bag" click.pos&#123;569,329&#125; elseif color.multi_color(&#123;&#123;769,456,0x8ee3c1&#125;,&#123;769,457,0x71cdb3&#125;,&#123;769,458,0x50b6a5&#125;,&#123;769,459,0x31a897&#125;,&#123;740,474,0xffffff&#125;,&#123;759,475,0xfdfefe&#125;,&#123;426,50,0x98511c&#125;,&#125;) then sys.log("转职") click.pos&#123;758,476&#125; elseif color.multi_color(&#123;&#123;503,294,0x8f3f0c&#125;,&#123;508,289,0x8c3906&#125;,&#123;496,273,0xfcecdb&#125;,&#123;642,273,0x86dbb9&#125;,&#123;642,274,0x60c5b3&#125;,&#123;650,288,0xfeffff&#125;,&#123;650,293,0xfdfefe&#125;,&#123;603,290,0xfeffff&#125;,&#123;603,297,0xffffff&#125;,&#125;) then sys.log("重新连接") click.pos&#123;630,291&#125; elseif color.multi_color(&#123;&#123;268,83,0x8a3502&#125;,&#123;268,78,0x8a3502&#125;,&#123;268,88,0x8c3804&#125;,&#123;304,79,0x883300&#125;,&#123;182,492,0x8c3a07&#125;,&#123;201,492,0x893603&#125;,&#123;424,317,0xcea06f&#125;,&#125;) then sys.log("邮件") if color.multi_color(&#123;&#123;330,69,0xf52c27&#125;,&#123;330,78,0xf3201d&#125;,&#123;326,74,0xf3201d&#125;,&#123;335,74,0xf52c27&#125;,&#125;) then if not color.multi_color(&#123;&#123;150,502,0xa4e659&#125;,&#123;144,497,0x8bcd41&#125;,&#123;158,495,0x98e05c&#125;,&#125;) then click.pos&#123;151,492&#125; --勾选 end for var = 1,10 do sys.msleep(500) click.pos&#123;778,489&#125; end click.pos&#123;609,485&#125; --删除 else click.pos&#123;849,36&#125; end elseif color.multi_color(&#123;&#123;473,30,0xa17f4b&#125;,&#123;473,31,0xffeaa7&#125;,&#123;473,63,0xd8832e&#125;,&#123;473,64,0xc16625&#125;,&#123;473,65,0x9e3816&#125;,&#123;445,51,0xfddb86&#125;,&#123;493,49,0xfddd9c&#125;,&#123;510,48,0xfbd9a6&#125;,&#125;) then sys.log("开服活动") click.pos&#123;881,67&#125; elseif color.multi_color(&#123;&#123;657,117,0x221100&#125;,&#123;674,117,0x2d1c0a&#125;,&#123;644,110,0xeee2cb&#125;,&#123;645,132,0xefe1c3&#125;,&#123;611,151,0x221100&#125;,&#123;421,50,0x98511c&#125;,&#125;) then sys.log("骑宠") if color.multi_color(&#123;&#123;690,460,0xf21d1b&#125;,&#123;690,461,0xf21c1a&#125;,&#123;690,462,0xf21d1b&#125;,&#125;) then if color.multi_color(&#123;&#123;641,469,0xfcfefe&#125;,&#123;648,469,0xffffff&#125;,&#123;608,469,0xfdfefe&#125;,&#123;663,471,0xf7fcfb&#125;,&#125;) then --一键升星 click.pos&#123;636,472&#125; end elseif color.multi_color(&#123;&#123;844,458,0xf11414&#125;,&#123;844,465,0xf21a19&#125;,&#123;849,461,0xf7322c&#125;,&#125;) then for var = 1,10 do click.pos&#123;784,471&#125; sys.msleep(200) end click.pos&#123;849,36&#125; elseif color.multi_color(&#123;&#123;770,459,0xf11414&#125;,&#123;770,460,0xf11414&#125;,&#123;770,461,0xf11414&#125;,&#125;) then for var = 1,10 do click.pos&#123;722,466&#125; end else click.pos&#123;849,36&#125; end elseif color.multi_color(&#123;&#123;483,79,0x883300&#125;,&#123;483,82,0x893401&#125;,&#123;502,74,0x893502&#125;,&#123;502,78,0x883300&#125;,&#123;456,77,0x883300&#125;,&#123;373,105,0xa0916f&#125;,&#123;605,105,0xa0916f&#125;,&#125;) then sys.log("符文背包") local _tab_bag = &#123;&#123;206,146&#125;,&#123;520,146&#125;,&#123;204,229&#125;,&#123;523,229&#125;,&#123;205,311&#125;&#125; local rnd = math.random(1,#_tab_bag) click.pos&#123;_tab_bag[rnd][1],_tab_bag[rnd][2]&#125; elseif color.multi_color(&#123;&#123;488,74,0x883300&#125;,&#123;510,75,0x8c3a06&#125;,&#123;451,78,0x883300&#125;,&#123;227,414,0xdb2ce6&#125;,&#123;247,410,0x883300&#125;,&#125;) then sys.log("装备吞噬") for var = 1,3 do click.pos&#123;714,434&#125; end elseif color.multi_color(&#123;&#123;139,87,0x883300&#125;,&#123;252,81,0x8b3805&#125;,&#123;164,88,0x883300&#125;,&#123;560,295,0xcfa474&#125;,&#123;559,297,0xf4e9cd&#125;,&#125;) then sys.log("符文") if color.multi_color(&#123;&#123;204,75,0xf11414&#125;,&#123;204,82,0xf21817&#125;,&#123;208,79,0xf21817&#125;,&#125;) then -- 红点 for i=1,10 do click.pos&#123;784,484&#125; --升级 end else click.pos&#123;849,36&#125; end elseif color.multi_color(&#123;&#123;885,217,0xfefefe&#125;,&#123;885,213,0xfffffe&#125;,&#123;892,245,0xfefdfd&#125;,&#123;769,450,0x8ee3c1&#125;,&#123;769,451,0x71cdb3&#125;,&#123;769,452,0x50b6a5&#125;,&#123;769,454,0x27a291&#125;,&#123;639,465,0xfeffff&#125;,&#123;639,450,0x8ee3c1&#125;,&#125;) then sys.log("翅膀") for i = 1,5 do if color.multi_color(&#123;&#123;847,459,0xf21717&#125;,&#123;847,460,0xf11414&#125;,&#123;847,461,0xf11414&#125;,&#123;847,462,0xf11414&#125;,&#125;) then if i&gt;=3 then click.pos&#123;800,328&#125; --第三颗珠子 else click.pos&#123;630,322&#125; end click.pos&#123;787,470&#125; click.pos&#123;635,467&#125; sys.msleep(2500) else click.pos&#123;849,36&#125; break end end elseif color.multi_color(&#123; &#123;&#123;476,423,0x86dbb9&#125;,&#123;476,424,0x60c5b3&#125;,&#123;476,425,0x45b09f&#125;,&#123;476,426,0x2ea594&#125;,&#123;491,443,0xeff8f7&#125;,&#123;502,441,0xffffff&#125;,&#123;275,126,0x271705&#125;,&#123;657,125,0x231201&#125;,&#125;, &#123;&#123;489,73,0x883300&#125;,&#123;470,74,0x883300&#125;,&#123;481,423,0x86dbb9&#125;,&#123;481,424,0x60c5b3&#125;,&#123;481,425,0x45b09f&#125;,&#125;, &#125;) then sys.log("境界") for var = 1,3 do click.pos&#123;480,444&#125; end click.pos&#123;788,78&#125; elseif color.multi_color(&#123;&#123;514,50,0x98511c&#125;,&#123;431,50,0x98511c&#125;,&#123;155,68,0xb4a378&#125;,&#123;155,69,0xefde9a&#125;,&#123;155,70,0xfde198&#125;,&#123;153,84,0x8d3905&#125;,&#125;) then sys.log("强化") if color.multi_color(&#123;&#123;510,486,0xffffff&#125;,&#123;543,490,0xfeffff&#125;,&#123;486,489,0xfbfdfd&#125;,&#123;486,493,0xfcfefd&#125;,&#125;) then --是否自动强化 if color.multi_color(&#123;&#123;291,175,0xf52c27&#125;,&#123;301,175,0xf83c33&#125;,&#123;296,171,0xf21c1a&#125;,&#123;296,180,0xf7322c&#125;,&#125;) then --是否有红点 click.pos&#123;223,201&#125; --点装备 click.pos&#123;518,492&#125; --点强化 else click.pos&#123;849,36&#125; --关闭 end end elseif color.multi_color(&#123; &#123;&#123;565,82,0xffffff&#125;,&#123;565,87,0xffffff&#125;,&#123;582,85,0xfcfefe&#125;,&#123;575,69,0x8ee3c1&#125;,&#123;685,90,0x8a3603&#125;,&#123;685,72,0xeed5a2&#125;,&#125;, &#123;&#123;553,69,0x8ee3c1&#125;,&#123;553,70,0x71cdb3&#125;,&#123;553,71,0x50b6a5&#125;,&#123;685,72,0xeed5a2&#125;,&#123;685,90,0x8a3603&#125;,&#123;795,88,0x883401&#125;,&#123;803,92,0x8a3603&#125;,&#125;, &#123;&#123;523,88,0xfcfefe&#125;,&#123;684,83,0x883401&#125;,&#123;790,69,0xfceddb&#125;,&#123;790,72,0xeed5a2&#125;,&#123;803,82,0x8c3a07&#125;,&#123;803,92,0x8a3603&#125;,&#125;, &#125;) then sys.log("背包") if not _G.var.is_sell then click.pos&#123;557,87&#125;; _G.var.is_sell = true; return false end for var = 1,6 do click.pos&#123;787,88&#125; --整理 local item_tab = &#123;0xbef5a6,"0|1|0xb0ee99,0|2|0xa4f387,1|0|0xc2f5a6,-48|-19|0xfdfdb9,9|-15|0xf9e2ab,2|2|0xaded83,-23|-41|0xffffcc"&#125; local btn_tab = &#123; &#123;0xfeffff,"0|-3|0xfbfefd,13|5|0xf8fcfb,18|5|0xfefefe,18|8|0xfeffff,10|-15|0x77eedd,10|19|0x50c7ac,52|-6|0x5bd7be"&#125;, &#123;0xfafdfc,"17|3|0xf8fdfc,17|-3|0xffffff,16|-16|0x52dece,16|17|0x5dc5a7,-38|-6|0x4dd5b3,21|3|0xf8fcfb,55|-8|0x59d5bc"&#125;, &#125; local x,y = color.ts_find_color(item_tab,80,&#123;503,117,844,457&#125;) if x ~= -1 then click.pos&#123;x,y&#125; sys.msleep(1500) end x,y = color.ts_find_color(btn_tab,80,&#123;503,117,876,478&#125;) sys.log("x:"..x..",y:"..y) if x ~= -1 then --sys.log("点装备") click.pos&#123;x,y&#125; end sys.msleep(500) end click.pos&#123;848,35&#125; --关闭窗口 _G.var.is_sell = false elseif color.multi_color(&#123;&#123;171,89,0x883300&#125;,&#123;188,88,0x883300&#125;,&#123;188,92,0x883300&#125;,&#123;159,74,0xac986f&#125;,&#123;159,76,0xfae49e&#125;,&#123;305,426,0xf5e5ab&#125;,&#125;) then sys.log("天书") for i=1,12 do if color.multi_color(&#123;&#123;777,441,0x86dbb9&#125;,&#123;777,442,0x60c5b3&#125;,&#123;777,443,0x45b09f&#125;,&#123;777,444,0x2ea594&#125;,&#123;771,457,0xffffff&#125;,&#123;791,463,0xffffff&#125;,&#125;) then click.pos&#123;779,459&#125; end _tab = &#123;0xfeffff,"-3|-1|0xfafdfc,13|0|0xfeffff,13|-13|0x28a291,13|-16|0x77d0b3,13|-18|0xbeb99b,9|22|0x57dab8"&#125; x,y = color.ts_find_color(_tab,80,&#123;503,117,876,478&#125;) if x ~= -1 then click.pos&#123;x,y&#125; else click.drag(640,395,640,223) sys.msleep(1500) end end click.pos&#123;878,65&#125; elseif color.multi_color(&#123;&#123;325,387,0xeedc62&#125;,&#123;325,388,0xffcb6c&#125;,&#123;325,389,0xf6ba62&#125;,&#123;325,390,0xf9b765&#125;,&#123;300,470,0xffe586&#125;,&#123;300,471,0xe3c34c&#125;,&#123;300,473,0x826343&#125;,&#125;) then sys.log("祈福") if color.multi_color(&#123;&#123;299,405,0x9b2413&#125;,&#123;299,410,0x8d2100&#125;,&#123;324,410,0x97240f&#125;,&#123;347,407,0x9b2413&#125;,&#125;) then click.pos&#123;330,408&#125; else click.pos&#123;786,83&#125; end elseif color.multi_color(&#123;&#123;407,65,0x230a0a&#125;,&#123;430,74,0xe6ab2c&#125;,&#123;208,82,0xfff9e0&#125;,&#123;306,82,0xfff9e0&#125;,&#123;452,508,0x7c674d&#125;,&#123;452,509,0xe5d1ac&#125;,&#123;512,50,0x98511c&#125;,&#125;) then sys.log("领取7日奖励") if color.multi_color(&#123;&#123;632,444,0xe5bb89&#125;,&#123;632,445,0xefbc78&#125;,&#123;632,446,0xeea462&#125;,&#123;637,469,0xe9b73d&#125;,&#123;637,485,0xe7ac58&#125;,&#123;637,486,0xbe6914&#125;,&#125;) then click.pos&#123;627,465&#125; --领取奖励 else click.pos&#123;849,34&#125; --关闭 end elseif color.multi_color(&#123;&#123;187,75,0x86ecec&#125;,&#123;187,76,0x53ccc5&#125;,&#123;187,78,0x239e96&#125;,&#123;166,99,0xfeffff&#125;,&#123;166,106,0xffffff&#125;,&#123;181,130,0x48dfc8&#125;,&#123;181,131,0x8c886c&#125;,&#123;178,173,0x281705&#125;,&#125;) then sys.log("冲级豪礼") local _tab,x,y _tab = &#123;0xfeffff,"0|3|0xfbfdfd,-13|-3|0xf9fcfc,-13|-16|0x87dcba,-13|-13|0x30a796,-8|-9|0x1fa392"&#125; for i=1,8 do x,y = color.ts_find_color(_tab,80,&#123;754,152,841,498&#125;) if x ~= -1 then click.pos&#123;x,y&#125; else click.drag(658,451,658,185) end sys.msleep(1500) end click.pos&#123;878,65&#125; --关闭 elseif color.multi_color(&#123;&#123;152,81,0x893401&#125;,&#123;166,86,0x883300&#125;,&#123;162,90,0x8b3602&#125;,&#123;172,107,0xfedd99&#125;,&#123;172,108,0xbca77b&#125;,&#123;372,469,0x883300&#125;,&#125;) then sys.log("宝石镶嵌") local _tab,x,y for i=1,6 do _tab = &#123;0xf7322c,"0|1|0xf21c1a,0|2|0xf11414,-4|41|0x4e3729"&#125; x,y = color.ts_find_color(_tab,80,&#123;278,158,310,499&#125;) sys.log(x) if x ~= -1 then click.pos&#123;x,y&#125; sys.msleep(2500) click.pos&#123;705,224&#125; sys.msleep(500) click.pos&#123;519,296&#125; sys.msleep(2500) click.pos&#123;708,363&#125; sys.msleep(500) click.pos&#123;519,296&#125; else click.drag(215,463,215,317) sys.msleep(1500) end sys.msleep(500) end click.pos&#123;847,35&#125; --关闭 elseif color.multi_color(&#123;&#123;166,99,0x231201&#125;,&#123;166,106,0x221100&#125;,&#123;194,138,0x86ecec&#125;,&#123;194,139,0x53ccc5&#125;,&#123;194,140,0x31aca4&#125;,&#123;170,167,0xfdfefe&#125;,&#125;) then sys.log("每日签到") local day = tonumber(os.date("%d",os.time())) local _tab_clk = &#123; &#123;348,151&#125;,&#123;432,159&#125;,&#123;523,154&#125;,&#123;621,158&#125;,&#123;705,153&#125;,&#123;802,157&#125;, &#123;351,222&#125;,&#123;439,225&#125;,&#123;525,224&#125;,&#123;621,225&#125;,&#123;700,228&#125;,&#123;789,228&#125;, &#123;346,302&#125;,&#123;438,295&#125;,&#123;533,300&#125;,&#123;623,301&#125;,&#123;702,300&#125;,&#123;791,299&#125;, &#123;345,371&#125;,&#123;439,369&#125;,&#123;534,371&#125;,&#123;628,373&#125;,&#123;702,377&#125;,&#123;810,381&#125;, &#123;357,301&#125;,&#123;435,302&#125;,&#123;527,299&#125;,&#123;617,303&#125;,&#123;699,302&#125;,&#123;793,301&#125;, &#123;356,374&#125;, &#125; for i =1,2 do sys.msleep(500) click.pos&#123;_tab_clk[day][1],_tab_clk[day][2]&#125; end local _qiand_tab = &#123;&#123;346,458&#125;,&#123;446,455&#125;,&#123;576,460&#125;,&#123;704,461&#125;,&#123;824,460&#125;&#125; for i=1,#_qiand_tab do click.pos&#123;_qiand_tab[i][1],_qiand_tab[i][2]&#125; sys.msleep(300) end click.pos&#123;878,65&#125; --关闭 else if _G.var.step == "fub" then if color.multi_color(&#123;&#123;774,461,0xadaa94&#125;,&#123;774,462,0x8ee3c1&#125;,&#123;774,463,0x71cdb3&#125;,&#123;774,464,0x50b6a5&#125;,&#125;) then sys.log("九幽魔窟") if color.multi_color(&#123;&#123;617,402,0xc71111&#125;,&#123;617,403,0xca1111&#125;,&#123;617,404,0xca1111&#125;,&#123;617,405,0xca1111&#125;,&#125;) then sys.log("没有通行证") _G.func_list[4].is_finish = true click.pos&#123;848,35&#125; --关闭窗口 elseif color.multi_color(&#123;&#123;159,407,0x883300&#125;,&#123;159,402,0x883300&#125;,&#123;159,400,0x883300&#125;,&#123;159,388,0xf5eecd&#125;,&#123;159,421,0xfdd373&#125;,&#125;) then click.pos&#123;848,35&#125; --关闭窗口 end click.pos&#123;786,484&#125; elseif color.multi_color(&#123; &#123;&#123;816,471,0x8adfbd&#125;,&#123;816,472,0x6ccbb3&#125;,&#123;816,473,0x50b6a5&#125;,&#123;816,474,0x31a897&#125;,&#123;804,488,0xffffff&#125;,&#123;804,510,0x5dd8b6&#125;,&#123;151,405,0x221100&#125;,&#123;191,409,0x2f1d0a&#125;,&#125;, &#123;&#123;278,99,0xf5c46a&#125;,&#123;288,84,0x883300&#125;,&#123;296,91,0x893501&#125;,&#123;316,81,0x8c3803&#125;,&#123;770,471,0x8adfbd&#125;,&#123;770,474,0x31a897&#125;,&#125;, &#125;) then sys.log("守护仙灵") if color.multi_color(&#123;&#123;420,420,0x0cad2a&#125;,&#123;420,424,0x0bad2a&#125;,&#123;426,419,0x02aa23&#125;,&#123;426,425,0x07ac26&#125;,&#125;) then sys.log("副本次数=0") click.pos&#123;848,35&#125; --关闭窗口 else click.pos&#123;786,484&#125; --开始挑战 end elseif color.multi_color(&#123;&#123;173,78,0x883300&#125;,&#123;139,85,0x883300&#125;,&#123;147,67,0xfde198&#125;,&#123;806,469,0x89debc&#125;,&#123;806,470,0x66c8b3&#125;,&#125;) then sys.log("决战青云") if color.multi_color(&#123;&#123;184,486,0x893603&#125;,&#123;184,487,0x893502&#125;,&#123;184,488,0x893502&#125;,&#123;184,489,0x893502&#125;,&#123;190,487,0x8d3d0a&#125;,&#123;190,491,0x8b3806&#125;,&#125;) then sys.log("次数=0") click.pos&#123;848,35&#125; else local _clk_tab = &#123;&#123;310,241&#125;,&#123;450,291&#125;,&#123;616,322&#125;,&#123;768,249&#125;&#125; local rnd = math.random(1,#_clk_tab) click.pos&#123;_clk_tab[rnd][1],_clk_tab[rnd][2]&#125; click.pos&#123;774,490&#125; end elseif color.multi_color(&#123;&#123;420,451,0x01aa23&#125;,&#123;438,455,0x00aa22&#125;,&#123;469,447,0x01aa23&#125;,&#123;469,444,0x0aac29&#125;,&#123;438,446,0x00aa22&#125;,&#123;762,472,0x56bcab&#125;,&#123;762,473,0x38ab9a&#125;,&#125;) then sys.log("圣灵血阵") click.pos&#123;782,492&#125; elseif color.multi_color(&#123;&#123;170,488,0x231201&#125;,&#123;176,488,0x281705&#125;,&#123;195,485,0x221100&#125;,&#123;227,496,0x2e1d0a&#125;,&#123;406,55,0x756446&#125;,&#123;415,50,0x98511c&#125;,&#123;513,50,0x98511c&#125;,&#123;548,488,0x893401&#125;,&#125;) then sys.log("挑战BOSS") click.pos&#123;762,487&#125; end else click.pos&#123;848,35&#125; end end end), &#125;, &#123; Name='引导-点击组队', Color=&#123;&#123;725,131,0x805500&#125;,&#123;725,131,0x805500&#125;,&#123;783,462,0x477261&#125;,&#123;783,463,0x39675a&#125;,&#123;783,464,0x285b53&#125;,&#123;761,483,0x808080&#125;,&#125;, Run = (function() click.pos&#123;891,234&#125; end), &#125;, &#123; Name='诛仙塔', Color= &#123;&#123;457,295,0xffff33&#125;,&#123;467,298,0xffff33&#125;,&#123;510,293,0xfdfdfd&#125;,&#123;517,304,0xffffff&#125;,&#123;443,342,0xffff33&#125;,&#125;, Run = (function() click.pos&#123;783,475&#125; end), &#125;, &#123; Name='复活', Color= &#123;&#123;400,343,0x8a3603&#125;,&#123;423,347,0x883401&#125;,&#123;574,330,0x86dbb9&#125;,&#123;574,331,0x60c5b3&#125;,&#123;572,350,0xedf7f6&#125;,&#123;491,149,0x883300&#125;,&#123;491,153,0x8e3c09&#125;,&#125;, Run = (function() click.pos&#123;397,348&#125; end), &#125;, &#123; Name='主界面', Color= &#123; &#123;&#123;71,53,0xf27b37&#125;,&#123;71,54,0xdb6420&#125;,&#123;71,55,0xc64218&#125;,&#123;70,65,0xc33b08&#125;,&#123;68,56,0x1c140b&#125;,&#123;77,31,0x383027&#125;,&#123;73,27,0xb61d00&#125;,&#125;, &#123;&#123;71,53,0xf27b37&#125;,&#123;71,54,0xdb6420&#125;,&#123;69,61,0xb43519&#125;,&#123;69,63,0xb73312&#125;,&#123;70,66,0x241c14&#125;,&#123;877,9,0x02ff02&#125;,&#125;, &#125;, Run = (function() -- 防卡住检测 local is_ret = false if color.multi_color(&#123; &#123;&#123;692,321,0xa4a896&#125;,&#123;692,322,0x8ce1bf&#125;,&#123;692,323,0x71cdb3&#125;,&#123;692,324,0x52b8a7&#125;,&#123;692,325,0x35a998&#125;,&#125;, &#123;&#123;682,321,0xa4a896&#125;,&#123;682,322,0x8ce1bf&#125;,&#123;682,323,0x71cdb3&#125;,&#123;685,341,0xffffff&#125;,&#123;701,348,0xfeffff&#125;,&#125;, &#123;&#123;685,197,0x9f7736&#125;,&#123;685,198,0xe0c9a0&#125;,&#123;685,199,0xf8eacf&#125;,&#123;775,311,0xf5e0b6&#125;,&#123;776,311,0xe0c590&#125;,&#123;777,311,0xa27019&#125;,&#123;647,282,0xa27019&#125;,&#125;, &#125;) then sys.log("点装备") click.pos&#123;694,345&#125; is_ret = true elseif color.multi_color(&#123;&#123;909,52,0xddcaae&#125;,&#123;901,52,0xe9e2ce&#125;,&#123;901,55,0xe4d3b1&#125;,&#123;901,59,0xdac9a7&#125;,&#123;919,27,0xd5b47a&#125;,&#123;899,28,0x8d643b&#125;,&#123;898,28,0xa67d4b&#125;,&#125;) then sys.log("副本中") is_ret = true elseif color.multi_color(&#123;&#123;409,379,0xf9ca53&#125;,&#123;407,382,0xedb33d&#125;,&#123;407,384,0xf2b846&#125;,&#123;470,359,0xf8df84&#125;,&#123;489,357,0xfde893&#125;,&#125;) then sys.log("读条中") is_ret = true end if is_ret then return false end local _tab_main = &#123; --主线 &#123;0x35ea67,"0|5|0x41fa74,0|9|0x38e76b,10|-1|0x30d863,10|11|0x43fc75,-10|11|0x40f371,-10|-1|0x2bd35e"&#125;, &#123;0xfea900,"0|4|0xfaa500,0|8|0xe79200,10|-1|0xe99a00,10|10|0xfca800,-10|10|0xf3a200,-10|-2|0xd38700"&#125;, &#125; local _tab_red = &#123; --是否需要升级 &#123;0xe80000,"0|4|0xfa0000,11|0|0xe30000,15|0|0xd90000,24|6|0xed0000,30|6|0xec0000"&#125;, &#123;0xf60000,"3|-3|0xce0000,3|6|0xe00000,9|2|0xfa0000,24|2|0xf30000,24|-1|0xda0000"&#125;, &#123;0xe00000,"5|0|0xdc0000,0|4|0xdb0000,5|4|0xe90000,20|3|0xe00000"&#125;, &#123;0xa10000,"9|0|0xc90000,8|10|0xd60000,30|2|0xe30000,30|5|0xe30000,30|8|0xec0000,-8|4|0xf40000"&#125;, &#123;0xe80000,"4|0|0xf60000,7|-2|0xd90000,28|2|0xf30000,28|-1|0xda0000,13|2|0xfa0000"&#125;, &#123;0xfc0000,"17|0|0xc90000,35|2|0xf20000,38|2|0xe30000,38|0|0xf20000,22|1|0xed0000"&#125;, &#125; local _tab_ric = &#123; --日常任务 &#123;0xf8a300,"0|1|0xffaa00,0|2|0xffaa00,0|3|0xffaa00,3|-4|0xc38100,9|-4|0xd08b00,10|7|0xce8000,3|7|0xce8100"&#125;, --护送美女 &#123;0x3df870,"0|5|0x44ff77,3|7|0x2cce5f,9|7|0x2ccb58,6|-4|0x34d060"&#125;, &#123;0xd38700,"4|1|0xd38c00,20|12|0xfca800,14|9|0xfea900,10|1|0xfba600,7|1|0xfda900,14|9|0xfea900"&#125;, --赏金任务 &#125; local clear_offset_task = function() local _tab_offset = &#123; --支线任务 &#123;0x2dc6cc,"-5|0|0x38a9af,6|0|0x1ebcc4,29|1|0x0edded,29|5|0x06dceb,10|11|0x00e1f2"&#125;, &#123;0x00dbec,"0|11|0x00ebfc,10|0|0x00e7f8,20|-1|0x00c2d3,20|11|0x00e2f3,29|3|0x00e8f9,39|1|0x00eafb"&#125; &#125; local _tab_offset_2 = &#123; --支线任务 &#123;0xfda800,"0|3|0xea9500,-6|0|0xe09400,10|0|0xe99a00,10|11|0xfca800,-10|11|0xf3a200,5|0|0xe09400"&#125;, &#123;0x43fd76,"-6|0|0x3be065,0|3|0x39ea6c,10|-1|0x30d863,10|11|0x43fc75,-6|0|0x3be065,6|0|0x2aa445"&#125;, --&#123;0x3be569,"7|0|0x40f672,15|-1|0x30d863,15|11|0x43fc75,-1|8|0x43fc76,-5|11|0x40f371,6|3|0x42fa75"&#125;, --转职 --&#123;0xe59900,"-1|8|0xfca800,6|3|0xfaa600,15|-1|0xd88d00,15|11|0xfca800,-5|11|0xf3a200"&#125;, --转职 &#125; local _ret = false for i = 1,5 do local x,y = color.ts_find_color(_tab_offset,80,&#123;6,153,88,284&#125;) sys.log("x:"..x) if x ~= -1 then sys.log("领取支线任务") click.pos&#123;x+20,y+20&#125; _ret = false break else x,y = color.ts_find_color(_tab_offset_2,80,&#123;49,151,74,305&#125;) if x ~= -1 then sys.log("点击支线任务") click.pos&#123;x+20,y+20&#125; _ret = false break else sys.log("支线任务已完成") _ret = true end end sys.msleep(600) end return _ret end local record_id_save = function() _G.const.record_id = _G.const.record_id + 1 sys.log(_G.const.record_id) _G.var.is_close_app = true local sFlie = io.open(_G.const.record_file_path, "w") sFlie:write(_G.const.record_id); sFlie:close() end if not _G.var.is_strong then if not _G.var.is_setting then if color.multi_color(&#123;&#123;751,489,0xf8b43d&#125;,&#123;757,489,0xfff9f9&#125;,&#123;759,516,0xefe7d6&#125;,&#123;758,519,0x352417&#125;,&#123;743,520,0x000000&#125;,&#123;745,514,0xfffffe&#125;,&#125;) then --设置 click.pos&#123;749,499&#125; elseif color.multi_color(&#123;&#123;472,516,0xeeddcc&#125;,&#123;472,490,0xfff9f9&#125;,&#123;466,479,0xedd448&#125;,&#123;466,472,0xf5d461&#125;,&#123;458,472,0xd05c1a&#125;,&#123;462,499,0x564128&#125;,&#123;458,520,0x000000&#125;,&#125;) then click.pos&#123;464,497&#125; else click.pos&#123;38,499&#125; end else if color.multi_color(&#123;&#123;46,497,0xb34d09&#125;,&#123;36,488,0xaf4916&#125;,&#123;26,499,0xb54a18&#125;,&#123;36,508,0xb74c12&#125;,&#123;28,490,0xf1d0a7&#125;,&#125;) then --设置 click.pos&#123;38,499&#125; elseif color.multi_color(&#123;&#123;783,280,0xf7362f&#125;,&#123;793,280,0xf62f29&#125;,&#123;788,275,0xf52924&#125;,&#123;788,284,0xf32320&#125;,&#123;771,282,0xecdbb9&#125;,&#123;772,304,0xf0cca1&#125;,&#125;) and not _G.var.is_get_mail then click.pos&#123;772,295&#125; -- 领取邮件 elseif color.multi_color(&#123;&#123;835,280,0xeae982&#125;,&#123;839,277,0xf0e88d&#125;,&#123;840,286,0x82481f&#125;,&#123;845,284,0x703e15&#125;,&#125;) then click.pos&#123;844,291&#125; --变强 sys.msleep(500) click.pos&#123;749,275&#125; elseif color.multi_color(&#123;&#123;653,7,0xf42723&#125;,&#123;653,8,0xf21d1c&#125;,&#123;653,9,0xf21c1a&#125;,&#123;653,10,0xf21c1b&#125;,&#123;653,11,0xf3211f&#125;,&#125;) then --开服送礼 click.pos&#123;631,28&#125; sys.msleep(2500) if color.multi_color(&#123;&#123;678,130,0xf42623&#125;,&#123;679,130,0xf21d1b&#125;,&#123;680,130,0xf21b19&#125;,&#125;) then click.pos&#123;635,134&#125; elseif color.multi_color(&#123;&#123;679,166,0xf11414&#125;,&#123;680,166,0xf11414&#125;,&#123;681,166,0xf11414&#125;,&#123;682,166,0xf11414&#125;,&#125;) then click.pos&#123;633,168&#125; elseif color.multi_color(&#123;&#123;679,203,0xf11414&#125;,&#123;680,203,0xf11414&#125;,&#123;681,203,0xf11414&#125;,&#125;) then click.pos&#123;637,207&#125; elseif color.multi_color(&#123;&#123;679,88,0xf11414&#125;,&#123;679,89,0xf11414&#125;,&#123;679,90,0xf11414&#125;,&#125;) then click.pos&#123;633,95&#125; end elseif color.multi_color(&#123;&#123;811,17,0xf21b1a&#125;,&#123;812,17,0xf11616&#125;,&#123;813,17,0xf11615&#125;,&#125;) then --展开 click.pos&#123;800,31&#125; sys.msleep(2500) elseif color.multi_color(&#123;&#123;765,68,0xf12115&#125;,&#123;764,67,0xed2116&#125;,&#125;) then click.pos&#123;744,98&#125; --福利 elseif color.multi_color(&#123;&#123;709,68,0xf31f1d&#125;,&#123;709,69,0xf21818&#125;,&#123;709,70,0xf21817&#125;,&#125;) then click.pos&#123;680,92&#125; --祈福 elseif color.multi_color(&#123;&#123;650,68,0xf11414&#125;,&#123;649,68,0xf11414&#125;,&#123;648,68,0xf11414&#125;,&#125;) then click.pos&#123;631,95&#125; --寻宝 else _G.var.is_strong = true end end return false end local x,y,x2,y2 if _G.var.is_up then x,y = color.ts_find_color(_tab_ric,80,&#123;6,152,75,304&#125;) if x ~= -1 then sys.log("开始日常任务") sys.log("x:"..x..",y:"..y) click.pos&#123;x+20,y+20&#125; else _G.var.is_up = false end else x,y = color.ts_find_color(_tab_main,80,&#123;49,154,75,304&#125;) --主线任务判断 if x ~= -1 then _G.var.n = 1 x2,y2 = color.ts_find_color(_tab_red,80,&#123;48,154,134,318&#125;) if x2 ~= -1 then sys.log("需要提升等级") if _G.var.is_ric_sucess then sys.log("日常已经完成") --清理支线 local offset_ret = clear_offset_task() if offset_ret then if color.multi_color(&#123;&#123;783,280,0xf7362f&#125;,&#123;793,280,0xf62f29&#125;,&#123;788,275,0xf52924&#125;,&#123;788,284,0xf32320&#125;,&#123;771,282,0xecdbb9&#125;,&#123;772,304,0xf0cca1&#125;,&#125;) then click.pos&#123;772,295&#125; -- 领取邮件 elseif color.multi_color(&#123;&#123;835,280,0xeae982&#125;,&#123;839,277,0xf0e88d&#125;,&#123;840,286,0x82481f&#125;,&#123;845,284,0x703e15&#125;,&#125;) then click.pos&#123;844,291&#125; --变强 sys.msleep(500) click.pos&#123;749,275&#125; else record_id_save() _G.var.is_close_app = true return true end end else _G.var.is_up = true if color.multi_color(&#123;&#123;856,113,0xededed&#125;,&#123;856,119,0xe1d0bf&#125;,&#123;865,124,0xefcd9a&#125;,&#123;876,121,0xfadfbd&#125;,&#123;853,113,0x0b2d4f&#125;,&#123;854,108,0xf6f2b8&#125;,&#125;) then click.pos&#123;872,103&#125; elseif color.multi_color(&#123; &#123;&#123;932,84,0xf7f5c9&#125;,&#123;910,92,0xc11701&#125;,&#123;907,85,0xff7e4b&#125;,&#123;919,83,0x184b6d&#125;,&#125;, &#123;&#123;912,118,0xd4c3b2&#125;,&#123;913,124,0xd9b795&#125;,&#123;920,124,0xeac895&#125;,&#123;937,81,0xf83d34&#125;,&#123;910,114,0x0f2042&#125;,&#125;, &#125;) then click.pos&#123;930,97&#125; end end else sys.log("点击主线任务") sys.log("x:"..x..",y:"..y) click.pos&#123;x+20,y+20&#125; end else _G.var.n = _G.var.n + 1 sys.log("找不到主线".._G.var.n) if _G.var.n &gt;= 10 then _G.var.is_close_app = true return true end --[[ local offset_ret = clear_offset_task() if offset_ret then record_id_save() return true end ]] --clear_offset_task() end end end), NoRepeat = true, &#125;, Repeat = &#123; n = 120, Run = (function() _G.var.is_close_app = true return true end), &#125;, timeout = &#123; n = 60, Run = (function() _G.var.is_close_app = true return true end), &#125;, Begin = (function() end), End = (function() end), sleep = 1200, csim = 80,&#125;function _Do(_tab) -- 判断是否传入的是正确内容 local check_table check_table = function(t) if type(t) ~= 'table' then error('传入非table内容',3) end if #t == 0 then error('传入table无数据',3) end if not (type(t.csim) == 'number' or type(t.csim) == 'nil') then error('相似度数值不正确',3) end if not ( ( type(t.Repeat) == 'table' and type(t.Repeat.n) == 'number' and type(t.Repeat.Run) == 'function' ) or type(t.Repeat) == 'nil' ) then error('重复检测参数不正确',3) end if not ( ( type(t.timeout) == 'table' and type(t.timeout.n) == 'number' and type(t.timeout.Run) == 'function' ) or type(t.timeout) == 'nil' ) then error('超时参数不正确',3) end end check_table(_tab) if _G.DoName then table.insert(DoName,_tab.Name) else _G.DoName = &#123;_tab.Name&#125; end local _now = os.time() local _break = false local _Repeat = false for _key,_value in ipairs(_tab) do _value.RepeatTime = os.time() end if _tab.Begin then _tab.Begin() end while true do local _States = &#123;&#125; --寻找满足状态的项 keepScreen(true) for _key,_value in ipairs(_tab) do isCheck = false if _value.Color then isCheck = color.multi_color(_value.Color, _value.csim or _tab.csim) elseif _value.Find_Color then local x,y = color.ts_find_color(_value.Find_Color, _value.csim or _tab.csim,_value.Range) if x ~= -1 then if _value.Offset then click.pos&#123;x + _value.Offset[1],y + _value.Offset[2]&#125; end end isCheck = (x ~= -1 and y ~= -1) end if isCheck then table.insert(_States,_key) if _tab.Repeat then if os.time() - _value.RepeatTime &gt;= _tab.Repeat.n then _value.RepeatTime = os.time() if not _value.NoRepeat then _Repeat = true; sys.log(_value.Name..' 重复') end end end else _value.RepeatTime = os.time() end end keepScreen(false) --超时判断 if #_States == 0 then if _tab.timeout then if os.time() - _now &gt;= _tab.timeout.n then local _Back = _tab.timeout.Run() if _Back then return end if _tab.timeout.layer then _Do(_tab.timeout.layer) end _now = os.time() end end else --执行满足状态的项 for _key,_value in ipairs(_States) do local _Handle = _tab[_value] sys.log("Step：".._Handle.Name) if _Handle.Run then if _Handle.Run() then _break = true end end if _Handle.layer then _Do(_Handle.layer) end _now = os.time() end if _break then break end if _Repeat then if _tab.Repeat.Run() then return end _Repeat=false end end sys.msleep(_tab.sleep or 500) end if _tab.End then _tab.End() end if type(_G.DoName) == 'table' then if #(_G.DoName) &gt; 0 then table.remove(_G.DoName,#DoName) end endendcolor = &#123; is_color = (function(x,y,c,s) local fl,abs = math.floor,math.abs s = fl(0xff*(100-s)*0.01) local r,g,b = fl(c/0x10000),fl(c%0x10000/0x100),fl(c%0x100) local rr,gg,bb = getColorRGB(x,y) if abs(r-rr)&lt;s and abs(g-gg)&lt;s and abs(b-bb)&lt;s then return true end end), --[[ multi_ = (function(_tab,_sim) is_color = true keepScreen(true) for i,v in ipairs(_tab) do if color.is_color(v[1],v[2],v[3],_sim) then is_color = false break end end keepScreen(false) return is_color end), ]] --多点multi_color multi_color = (function(_tab,_sim) _sim = _sim or 85 if type(_tab[1][1]) == "number" then if multiColor(_tab,_sim) then return true end else for i,v in ipairs(_tab) do if multiColor(v,_sim) then return true end end end return false end), get_color = (function(x,y) local color = getColor(x, y) return color end), --点阵找色 find_color = (function(_tab,_sim,range) _sim = _sim or 85 local x,y if type(_tab[1][1]) == "number" then x,y = findMultiColorInRegionFuzzyByTable(_tab,_sim,table.unpack(range)) else for i,v in pairs(_tab) do x,y = findMultiColorInRegionFuzzyByTable(v,_sim,table.unpack(range)) if x ~= -1 then break end end end return x,y end), --触动区域多点找色 ts_find_color = (function(_tab,_sim,range) _sim = _sim or 85 --&#123;0x926d31, "0|1|0x9b6425,0|2|0x9e6021,0|3|0x98672a,1|3|0x33d7b2,2|3|0x2fdcb7,3|3|0x2fdcb7"&#125;, --&#123;&#123;0x926d31, "0|1|0x9b6425,0|2|0x9e6021,0|3|0x98672a,1|3|0x33d7b2,2|3|0x2fdcb7,3|3|0x2fdcb7"&#125;,&#125;, --&#123;&#123;0,0,0x000000&#125;,&#123;0,5,0x000000&#125;,&#123;33,3,0x000000&#125;,&#123;-18,105,0x007aff&#125;,&#123;-10,194,0x007aff&#125;,&#123;-11,272,0x007aff&#125;,&#123;143,110,0x007aff&#125;,&#125;, --&#123;&#123;&#123;0,0,0x000000&#125;,&#123;0,5,0x000000&#125;,&#123;33,3,0x000000&#125;,&#123;-18,105,0x007aff&#125;,&#123;-10,194,0x007aff&#125;,&#123;-11,272,0x007aff&#125;,&#123;143,110,0x007aff&#125;,&#125;,&#125;, local x,y if type(_tab[1]) ~= "table" then x,y = findMultiColorInRegionFuzzy(_tab[1],_tab[2],_sim,table.unpack(range)) elseif type(_tab[1][1]) ~= "table" then if #_tab[1] &lt;= 2 then for i,v in pairs(_tab) do x,y = findMultiColorInRegionFuzzy(v[1],v[2],_sim,table.unpack(range)) if x ~= -1 then break end end else local _posandcolor,_color = "","" for i,v in pairs(_tab) do if i ~= 1 then _posandcolor = _posandcolor..v[1].."|"..v[2].."|"..v[3].."," else _color = v[3] end end _posandcolor = string.sub(0,string.len(_posandcolor)-1) x,y = findMultiColorInRegionFuzzy(_color,_posandcolor,_sim,table.unpack(range)) end else for i,v in pairs(_tab) do local _posandcolor,_color = "","" for i,v in pairs(_tab) do if i ~= 1 then _posandcolor = _posandcolor..v[1].."|"..v[2].."|"..v[3].."," else _color = v[3] end end _posandcolor = string.sub(0,string.len(_posandcolor)-1) x,y = findMultiColorInRegionFuzzy(_color,_posandcolor,_sim,table.unpack(range)) if x ~= -1 then break end end end return x,y end), find_color_ext = (function(_tab,_sim,x, y, x0, y0) _sim = _sim or 85 local point = findMultiColorInRegionFuzzyExt(_tab[1],_tab[2],_sim,x,y,x0,y0,&#123; main = 0x101010, list = 0x202020 &#125;) return point end),&#125;click = &#123; pos = (function(p,range, delay, delay2) math.randomseed(getRndNum()) local ora,delay,wait,msran = range or 10,delay or 200,delay2 or 100,math.random(20,100) local x,y = math.random(p[1]-ora,p[1]+ora),math.random(p[2]-ora,p[2]+ora) touchDown(x, y) mSleep(30) touchUp(x, y) --tap(math.random(p[1]-ora,p[1]+ora),math.random(p[2]-ora,p[2]+ora), math.random(delay-msran,delay+msran),math.random(wait-msran,wait+msran)) mSleep(math.random(wait-msran,wait+msran)) end), drag = (function(x1,y1,x2,y2,steplen,delay) local steplen = steplen or 10 local delay = delay or 50 moveTo(x1,y1,x2,y2,steplen,delay) end),&#125; --文件操作file = &#123; --判断文件是否存在 exist = (function(file) local sFlie,Err = io.open(file,"r+");if Err~=nil then return false end sFlie:close();return true end), --读取文件内容 read = (function(file) local sFlie,Err = io.open(file,"r");if Err~=nil then return nil end local _tmp = sFlie:read("*all");sFlie:close();return _tmp end), --读取文件内容并转化成 table totable = (function(file) local _tmp = &#123;&#125;;local sFlie,Err = io.open(file,"r");if Err~=nil then return &#123;&#125; end;for _line in sFlie:lines() do table.insert(_tmp, string.match(_line,"%C+")) end;sFlie:close();return _tmp; end), --保存文件内容 save = (function(file,data,append) local sFlie,Err = io.open(file,(append and "a") or "w");sFlie:write(data..((append and "\r\n") or ""));sFlie:close() end), --删除 delete = (function(file) os.remove(file) end)&#125;sys = &#123; log = (function(strs,is_msg) is_msg = is_msg or false; if is_msg then toast(strs,1) end fwShowWnd("wid",26,319,100,30,0) fwShowTextView("wid","textid",strs,"center","FFFFFF","000000",0,20,0,0,200,100,1) --显示一个文字视图 mSleep(500) fwCloseView("wid") nLog(strs) end), msleep = (function(time) mSleep(time) end), input_text = (function(string) inputText(string) end), input_text2 = (function(string) local TmpHex = "" local _key_tab = &#123; ["0"] = 7,["1"] = 8,["2"] = 9,["3"] = 10,["4"] = 11,["5"] = 12,["6"] = 13,["7"] = 14,["8"] = 15,["9"] = 16, ["a"] = 29,["b"] = 30,["c"] = 31,["d"] = 32,["f"] = 33,["g"] = 34,["h"] = 35,["i"] = 36,["j"] = 37,["k"] = 38, ["l"] = 40,["m"] = 41,["n"] = 42,["o"] = 43,["p"] = 44,["q"] = 45,["r"] = 46,["s"] = 47,["t"] = 48,["u"] = 49, ["v"] = 50,["w"] = 51,["x"] = 52,["y"] = 53,["z"] = 54, &#125; for i = 1 , string.len(string) do local key = string.sub(string,i,i) if _key_tab[key] ~= nil then os.execute("input keyevent ".._key_tab[key]) sys.msleep(5) end end end), -- 生成随机汉字 rnd_chr = (function() local iRet, sRet = pcall(function() local x,n local chr=string.char n=math.random (19968 , 40869) x=chr(bit32.bor(0xE0,bit32.extract (n, 12, 4))).. chr(bit32.bor(0x80,bit32.extract (n, 6, 6))).. chr(bit32.bor(0x80,bit32.extract (n, 0, 6))) return x end) if iRet == true then return sRet else sys.log(sRet) return "" end end),&#125;function getHttpFile(url, filepath, header) if header == null then os.execute(string.format("curl -o '%s' '%s' ",filepath, url)) else os.execute(string.format("curl -o %s -H '%s' '%s' ",filepath, header,url)) endendfunction iif(a,b,c) if a then return b else return c end end-- 生成随机昵称function get_name() local name_txt = file.read(_G.var.cur_resDir.."name.txt") sys.log(name_txt) local name_arr = strSplit(name_txt,"\n") local str = "" local ran = "" local is_jump = false for i=1,20 do ran = math.random(1,#name_arr) if #str &gt;= 14 then break elseif #str &gt; 9 then if #name_arr[ran] &gt; 6 then is_jump = true end end if not is_jump then str = str..name_arr[ran] end end return string.gsub(str, "%s", "")endfunction main() while (true) do _G.var = &#123; user = "", pwd = "", reg_user = "", reg_pwd = "", server = nil, w = "", h = "", n = 1, step = "", is_sltSer = false, --是否选择服务器 is_close_app = false, --是否关闭游戏 lv = -1, is_reg = false, is_sell = false, --是否出售 is_setting = false, --是否设置 is_up = false, --是否需要升级 is_strong = false, --是否需要变强 is_clk = false, --是否点击任务 is_ric = false, --是否正在日常 is_ric_sucess = false, is_get_mail = false, is_clear_ric = false, --是否清理完日常 cur_task_name = "", &#125; _G.const.record_id = file.read(_G.const.record_file_path) if _G.const.record_id == nil then _G.const.record_id = 1 else _G.const.record_id = tonumber(_G.const.record_id) if _G.const.record_id &gt; #_G.const.account_list then if UISet[2] == "0" then _G.const.record_id = 1 else dialog("账号全部完成", 0) lua_exit() end end end toast("执行至 ".._G.const.record_id..", 共计账号 "..#_G.const.account_list,3) local account = strSplit(_G.const.account_list[_G.const.record_id],"--") _G.var.user = account[1];_G.var.pwd = account[2];_G.var.server = tonumber(account[3]); toast(_G.var.user..",".._G.var.pwd,1) if not file.exist(_G.const.cur_resDir.."name.txt") then getHttpFile("http://cp666.oss-cn-shenzhen.aliyuncs.com/name.txt", _G.const.cur_resDir.."name.txt") --下载更新 end _G.var.w, _G.var.h = getScreenSize(); toast("当前分辨率:".._G.var.w..",".._G.var.h,1) if _G.var.w ~= 960 or _G.var.h ~= 540 then sys.log("setScreenScale") setScreenScale(true, 960, 540) end local bid = frontAppBid(); if bid ~= _G.const.package_name then closeApp(_G.const.package_name) sys.msleep(500) runApp(_G.const.package_name) end sys.log("Go") _Do(main_list) if _G.var.is_close_app then closeApp(_G.const.package_name) sys.msleep(1500) --cleanApp(_G.const.package_name) end endend_G.func_list = &#123; [1] = &#123; name = "主线任务", is_check = false, &#125;, [2] = &#123; name = "支线任务", is_check = false, &#125;, [3] = &#123; name = "赏金任务", find_color = &#123;0x231201,"-28|23|0xfed037,-53|14|0x7a3604,-53|55|0xffe2af,-40|-5|0xffe2af,37|12|0x2e1d0a,50|8|0x231201"&#125;, lv = 55, is_finish = false, is_check = false, &#125;, [4] = &#123; name = "九幽魔窟", find_color = &#123;0xbba386,"-2|0|0xf5d7a6,9|0|0x221100,29|11|0x281705,64|8|0x251402,-33|-6|0xffe2af,-33|54|0xffe2af,-32|18|0x58a7d1"&#125;, lv = 70, is_finish = false, is_check = false, &#125;, [5] = &#123; name = "守护仙灵", find_color = &#123;0xb9a184,"-34|-9|0xb49f83,-34|-8|0xffe2af,-30|19|0x03540b,-36|25|0x002706,-32|53|0xfcdfad,14|2|0x221100,35|3|0x251403,48|9|0x2c1b09"&#125;, lv = 100, is_finish = false, is_check = false, &#125;, [6] = &#123; name = "决战青云", find_color = &#123; &#123;0xb9a284,"-32|13|0xffffff,-32|-7|0xffe2af,-31|37|0xe02344,-31|53|0xffe2af,13|4|0x291806,24|4|0x3f2e19,46|-1|0x221100,62|2|0x221100"&#125;, &#123;0xb9a184,"-36|-8|0xffe2af,-48|22|0x333365,-42|22|0xdcab23,-32|52|0xffe2af,17|3|0x221100,46|-2|0x221100,62|1|0x221100"&#125;, &#125;, lv = 115, is_finish = false, is_check = false, &#125;, [7] = &#123; name = "圣灵血阵", find_color = &#123;0xbba386,"-31|-6|0xffe2af,-31|54|0xffe2af,-24|12|0xf03737,11|7|0x221100,6|-2|0x2c1b09,48|11|0x402f1b,67|8|0x231201"&#125;, lv = 105, is_finish = false, is_check = false, &#125;, [8] = &#123; name = "世界BOSS", find_color = &#123;0xac977d,"-31|-7|0xffe2af,-13|40|0xfef862,-50|16|0x6e1b13,-23|53|0xffe2af,-23|55|0xb7a27e,11|0|0x221100,40|2|0x221100,11|6|0x241301"&#125;, lv = 90, is_finish = false, is_check = false, &#125;, [9] = &#123; name = "护送美女", find_color = &#123;0xbaa285,"-25|26|0xfeded6,-27|10|0xf8ffff,-34|25|0xf5cac3,-33|44|0x73c82f,6|-1|0x251403,60|0|0x221100"&#125;, lv = 90, is_finish = false, is_check = false, &#125;, [10] = &#123; name = "注册账号", is_check = false, &#125;,&#125;local TmpTable = (function() local ret = &#123;&#125; for k,v in ipairs(_G.func_list) do table.insert(ret,v.name); end; return ret end)()function TableToJson(t) local function serialize(tbl) local tmp = &#123;&#125; for k, v in pairs(tbl) do local k_type = type(k) local v_type = type(v) local key = (k_type == "string" and "\"" .. k .. "\":") or (k_type == "number" and "") local value = (v_type == "table" and serialize(v)) or (v_type == "boolean" and tostring(v)) or (v_type == "string" and "\"" .. v .. "\"") or (v_type == "number" and v) tmp[#tmp + 1] = key and value and tostring(key) .. tostring(value) or nil end return "&#123;" .. table.concat(tmp, ",") .. "&#125;" end assert(type(t) == "table") return serialize(t) end local StrUI = &#123; &#123;["type"]="Label",["size"]=15,["align"]="left",["color"]="50,50,50",["text"]="账号设置路径",&#125;, &#123;["type"]="Edit",["prompt"]="0",["text"]=_G.const.sd_path,["size"]=15,["align"]="left",["color"]="0,0,0"&#125;, &#123;["type"]="RadioGroup",["select"]="0",["list"]="循环,不循环",&#125;, &#123;["type"] = "CheckBoxGroup",["list"] = table.concat(TmpTable,","),["select"] = "3@5",&#125;,&#125;UIRet , UISet[1], UISet[2], UISet[3]= showUI([[&#123; "style": "default", "config": "]]..UISave..[[", "width": ]]..w..[[, "height": ]]..h..[[, "cancelname": "不执行退出", "okname": "确认执行", "views": []]..string.sub(TableToJson(StrUI),2,-2)..[[] &#125;]])if tonumber(UIRet) == 0 then lua_exit() endif file.exist(UISet[1]) == false then dialog("请以&lt;账号--密码&gt;格式,文本以UTF-8格式放置到 ["..getSDCardPath().."/Pictures/".."] 目录.",0);lua_exit() end_G.const.account_list = strSplit(file.read(UISet[1]),"\n")for k,v in ipairs(_G.func_list) do v.is_check = iif(string.match("@".. UISet[3].."@","(@"..(tonumber(k)-1).."@)") == "@"..(tonumber(k)-1).."@",true,false) --副本勾选设置endmain()]]></content>
      <categories>
        <category>LUA</category>
      </categories>
      <tags>
        <tag>触动精灵,LUA</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cycript]]></title>
    <url>%2F2018%2F09%2F29%2FCycript%2F</url>
    <content type="text"><![CDATA[下载地址http://www.cycript.org/ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768先查找进程名称ps aux //查找所有进程ps aux | grep HuaYang //查找指定进程名的进程信息注入到进程 cycript -p SpringBoard//创建一个弹窗var alert = [[UIAlertView alloc] initWithTitle:@"\u0063\u0079\u0063\u0072\u0069\u0070\u0074\u8c03\u8bd5" message:@"cp666" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] return #"&lt;UIAlertView: 0x10b0665a0; frame = (0 0; 0 0); layer = &lt;CALayer: 0x170621280&gt;&gt;"[alert show][alert release]//如果知道一个对象在内存中的地址，可以通过“#”操作符来获取这个对象 [#0x10b0665a0 show] //如果知道一个类对象存在当前进程中，却不知道它的地址，不能通过“#”操作符来获取它，此时，不妨试试choose命令choose(UIAlertView)return [#"&lt;UIAlertView: 0x10b0665a0; frame = (0 0; 0 0); layer = &lt;CALayer: 0x170621280&gt;&gt;"]//打印出当前界面的view层级UIApp.keyWindow.recursiveDescription().toString() //Now/var/containers/Bundle/Application/7D69E3D5-8FF6-4BBD-937E-42A45C70C5E2/HuaYang.app/HuaYangcycript -p HuaYangUIApp.keyWindow.recursiveDescription().toString() //打印所有UI//通过view的nextResponder方法，可以找出它所属的视图控制器ViewController[#0x1552d1da0 nextResponder] #"&lt;PLBorderButton: 0x155343ce0; baseClass = UIButton; frame = (164 0; 131 46); hidden = YES; opaque = NO; layer = &lt;CALayer: 0x155343a30&gt;&gt;"screen = #0x155343ce0screen.hidden = NO recursiveDescription － 打印UIView对象[[UIApp keyWindow] recursiveDescription].toString()_printHierarchy － 直接打印所有UIViewController[[[UIWindow keyWindow] rootViewController] _printHierarchy].toString() _autolayoutTrace - recursiveDescription的简化版，去掉了UIView的一些描述[[UIApp keyWindow] _autolayoutTrace].toString()_ivarDescription - 打印某个对象所有instance的名字和值[choose(SBApplication)[0] _ivarDescription].toString()_methodDescription - 打印某个对象的属性，实例和类方法[choose(SBApplicationController)[0] _methodDescription].toString()[#0x104cf95e0 _methodDescription].toString()找到目标App的Documents目录路径cycript -p TargetApp[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask][0] 获取bundle info[[NSBundle mainBundle] infoDictionary].toString()触发UIControlEventTouchUpInside事件。[[choose(UIButton) objectAtIndex:0] sendActionsForControlEvents:UIControlEventTouchUpInside][#0x15d101c00 sendActionsForControlEvents:4095]cy# var sender = [[[[[UIApplication sharedApplication] keyWindow] subviews] objctAtIndex:0] nextResponder]#"&lt;ViewController: 0x159d15770&gt;"cy# [sender showImage:sender]]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>Cycript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reveal]]></title>
    <url>%2F2018%2F09%2F29%2FReveal%2F</url>
    <content type="text"><![CDATA[RHRevealLoader替换libraryReveal 1.0替换Reveal library 的版本太老了。我们必须要将新的 library 替换调iPhone里旧的 library。1scp /Applications/Reveal.app/Contents/SharedSupport/iOS-Libraries/libReveal.dylib root@your-iPhone-IP-address:/Library/RHRevealLoader/libReveal.dylib Reveal 2.0替换Reveal 2.0以上library不叫libReveal.dylib了，换成了RevealServer.framework。可以将RevealServer.framework里面的RevealServer拷倒iPhone里，将文件名改成libReveal.dylib1scp /Applications/Reveal.app/Contents/SharedSupport/iOS-Libraries/RevealServer.framework/RevealServer root@your-iPhone-IP-address:/Library/RHRevealLoader/libReveal.dylib]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>Reveal</tag>
      </tags>
  </entry>
</search>
